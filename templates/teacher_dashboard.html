<!-- templates/teacher_dashboard.html -->
{% extends "base.html" %}
{% block title %}å…ˆç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆ{% endblock %}
{% block content %}
<h2>å…ˆç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</h2>

<h3>æœ¬æ—¥åˆ†ã®æå‡º</h3>
<p>å¯¾è±¡æ—¥ï¼š{{ tdate }}</p>
<ul>
  {% for e in entries_today %}
    <li>
      {{ e.student.user.username }}ï¼š{{ e.content|default:"(å†…å®¹ãªã—)" }}
      {% if e.is_read %}
        <span class="liked">ğŸ‘ ã„ã„ã­æ¸ˆã¿ï¼ˆ{{ e.read_by.username }} / {{ e.read_at|date:"Y-m-d H:i" }}ï¼‰</span>
      {% else %}
        <form method="post" action="{% url 'mark_read' e.id %}" style="display:inline;">
          {% csrf_token %}
          <button class="btn" type="submit">&#128077; ã„ã„ã­</button>
        </form>
      {% endif %}
    </li>
  {% empty %}
    <li>ã¾ã æå‡ºã¯ã‚ã‚Šã¾ã›ã‚“</li>
  {% endfor %}
</ul>

<h3>æœªæå‡º</h3>
<ul>
  {% for s in not_submitted %}
    <li>{{ s.user.username }}ï¼ˆ{{ s.class_room.name }}ï¼‰</li>
  {% empty %}
    <li>æœªæå‡ºè€…ã¯ã„ã¾ã›ã‚“</li>
  {% endfor %}
</ul>

<h3>å±¥æ­´ï¼ˆæœ€æ–°200ä»¶ï¼‰</h3>
<form method="get">
  <input name="q" value="{{ request.GET.q }}" placeholder="ç”Ÿå¾’å/å†…å®¹ã§æ¤œç´¢">
  <button class="btn" type="submit">æ¤œç´¢</button>
</form>
<ul>
  {% for h in history %}
    <li>
      {{ h.target_date }} - {{ h.student.user.username }}ï¼š{{ h.content|truncatechars:40 }}
      <form method="post" action="{% url 'mark_read' h.id %}" style="display:inline;">
        {% csrf_token %}
        <button class="btn" type="submit">&#128077; ã„ã„ã­</button>
      </form>
    </li>
  {% empty %}
    <li>å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“</li>
  {% endfor %}
</ul>
{% endblock %}
