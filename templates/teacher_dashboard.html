{% extends "base.html" %}
{% block title %}å…ˆç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆ{% endblock %}
{% block content %}
<h2>å…ˆç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</h2>

<h3>æœ¬æ—¥åˆ†ã®æå‡º</h3>
<p>å¯¾è±¡æ—¥ï¼š{{ tdate }}</p>
<ul>
  {% for e in entries_today %}
    <li>
      {% if e.student.user.last_name or e.student.user.first_name %}
        {{ e.student.user.last_name }}{{ e.student.user.first_name }}
      {% else %}
        {{ e.student.user.username }}
      {% endif %}
      ï¼š{{ e.content|default:"(å†…å®¹ãªã—)" }}
      {% if e.is_read %}
        <span class="liked">
          ğŸ‘ ã„ã„ã­æ¸ˆã¿ï¼ˆ
          {% if e.read_by.last_name or e.read_by.first_name %}
            {{ e.read_by.last_name }}{{ e.read_by.first_name }}
          {% else %}
            {{ e.read_by.username }}
          {% endif %}
          / {{ e.read_at|date:"Y-m-d H:i" }}ï¼‰
        </span>
      {% else %}
        <form method="post" action="{% url 'mark_read' e.id %}" style="display:inline;">
          {% csrf_token %}
          <button class="btn" type="submit">&#128077; ã„ã„ã­</button>
        </form>
      {% endif %}
    </li>
  {% empty %}
    <li>ã¾ã æå‡ºã¯ã‚ã‚Šã¾ã›ã‚“</li>
  {% endfor %}
</ul>

<h3>æœªæå‡º</h3>
<ul>
  {% for s in not_submitted %}
    <li>
      
      {% if s.user.last_name or s.user.first_name %}
        {{ s.user.last_name }}{{ s.user.first_name }}
      {% else %}
        {{ s.user.username }}
      {% endif %}
      ï¼ˆ{{ s.class_room.name }}ï¼‰
    </li>
  {% empty %}
    <li>æœªæå‡ºè€…ã¯ã„ã¾ã›ã‚“</li>
  {% endfor %}
</ul>

<h3>å±¥æ­´ï¼ˆæœ€æ–°200ä»¶ï¼‰</h3>
<form method="get">
  <!-- æ—¥ä»˜ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒ»æ°åãƒ»å†…å®¹ã§çµã‚Šè¾¼ã¿æ¤œç´¢å¯ï¼ˆqã‚’viewsã«æ¸¡ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿å‡¦ç†ï¼‰ -->
  <input name="q" value="{{ request.GET.q }}" placeholder="ç”Ÿå¾’å/å†…å®¹ã§æ¤œç´¢">
  <button class="btn" type="submit">æ¤œç´¢</button>
</form>
<ul>
  {% for h in history %}
    <li>
      {{ h.target_date }} -
      {% if h.student.user.last_name or h.student.user.first_name %}
        {{ h.student.user.last_name }}{{ h.student.user.first_name }}
      {% else %}
        {{ h.student.user.username }}
      {% endif %}
      ï¼š{{ h.content|truncatechars:40 }}
      {% if h.is_read %}
        <span class="liked">
          ğŸ‘ ã„ã„ã­æ¸ˆã¿ï¼ˆ
          {% if h.read_by.last_name or h.read_by.first_name %}
            {{ h.read_by.last_name }}{{ h.read_by.first_name }}
          {% else %}
            {{ h.read_by.username }}
          {% endif %}
          / {{ h.read_at|date:"Y-m-d H:i" }}ï¼‰
        </span>
      {% else %}
        <span class="unliked">æœªç¢ºèª</span>
      {% endif %}
    </li>
  {% empty %}
    <li>å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“</li>
  {% endfor %}
</ul>
{% endblock %}
